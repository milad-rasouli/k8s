root = "/var/lib/containerd"
state = "/run/containerd"
version = 2

[grpc]
  address = "/var/lib/k0s/run/containerd.sock"

[plugins."io.containerd.grpc.v1.cri"]
  sandbox_image = "registry.k8s.io/pause:3.8"
  max_concurrent_downloads = 3
  systemd_cgroup = false

  [plugins."io.containerd.grpc.v1.cri".cni]
    bin_dir = "/opt/cni/bin"
    conf_dir = "/etc/cni/net.d"

  [plugins."io.containerd.grpc.v1.cri".containerd]
    snapshotter = "overlayfs"

  [plugins."io.containerd.grpc.v1.cri".registry]
    # where per-host hosts.toml are expected
    config_path = "/etc/k0s/containerd/certs.d"

  [plugins."io.containerd.grpc.v1.cri".registry.mirrors]
    [plugins."io.containerd.grpc.v1.cri".registry.mirrors."docker.io"]
      endpoint = ["http://192.168.59.11:5000"]
    [plugins."io.containerd.grpc.v1.cri".registry.mirrors."registry.k8s.io"]
      endpoint = ["http://192.168.59.11:5000"]
    [plugins."io.containerd.grpc.v1.cri".registry.mirrors."k8s.gcr.io"]
      endpoint = ["http://192.168.59.11:5000"]
